# Staff_FE

---
Code interview

## Javascript coding

- Array.prototype.filter

  ```typescript
  Array.prototyp.myFilter = function<T>(callback: (element: T, index: number, array: T[]) => boolean): T[] {
    const filteredArray: T[] = [];

    for(let i = 0; i < this.length; i ++) {
      if(callback(this[i], i, this)) {
        filteredArray.push(this[i]);
      }
    }

    return filteredArray;
  }

  const numbers = [1, 2, 3, 4, 5];
  const evenNumbers = numbers.myFilter((num) => num % 2 === 0);
  console.log(evenNumbers); // Output: [2, 4]
  ```

- Dynamic programming

  ```javascript
    function journey(path, maxStep) {
      let len = path.length;
      const arrSums = Array(len).fill(-Infinity);
      arrSums[0] = path[0];

      for(let i = 0; i < len; i ++ ){
        for(let j = Math.max(0, i - maxStep); j < i; j ++) {
          arrSums[i] = Math.max(arrSums[i], path[i] + arrSums[j]);
        }
      }

      return arrSums[len - 1];
    }
  ```

- two numbers

  ```javascript
    function twoNumber(arr, target) {
      const map = new Map();
      for(let i = 0; i < arr.length; i ++) {
        if(!map.has(arr[i])) {
          map.set(target - arr[i], i);
        } else {
          return [arr[map.get(arr[i])], arr[i]];
        }
      }
    }
  ```

- sum three number

  ```javascript
    function findThree(arr, target) {
    arr.sort((a, b) => a - b);
    const result = [];
    for(let i = 0; i < arr.length - 2; i ++) {
      if(i && arr[i] === arr[i - 1]) continue;
      let left = i + 1;
      let right = arr.length - 1;

      while(left < right) {
        let sum = arr[i] + arr[left] + arr[right];
        if(sum > target) {
          right --;
        } else if(sum < target) {
          left ++;
        } else {
          result.push([arr[i], arr[left++], arr[right--]]);
          while(arr[left] === arr[left - 1]) {
            left ++;
          }
          while(arr[right] === arr[right + 1]) {
            right --;
          }
        }
      }
    }
    return result;
  }

  const res = findThree([5, 2, 1, 1, 3, 4, 6], 8);
  console.log('res', res);
  ```

- version compare

  ```javascript
    function versionSort(arr) {
      return arr.sort((a, b) => {
        let i = 0;
        const arr1 = a.split(".");
        const arr2 = b.split(".");
        while (true) {
          // get the number from the same position
          const s1 = arr1[i];
          const s2 = arr2[i];
          i++;
          // if s1 or s2 not exists, that means the number at the same position has been compared, so the one with the longer length is bigger
          if (s1 === undefined || s2 === undefined) {
            return arr2.length - arr1.length;
          }
          if (s1 === s2) continue;
          // compared with number at the same position
          return s2 - s1;
        }
      });
    }

    const versions = ['2.1', '2.1.0', '10.2.1', '5.1.2', '1.0.4.5'];
    const arrs = versionSort(versions);
    console.log('arrs', arrs);
  ```

- find the first letter without repetition

  ```javascript
    function findOneStr(str) {
      if(!str) return -1;

      let map = {};
      let arr = str.split('');
      arr.forEach(item => {
          let val = map[item];
          map[item] = val ? val + 1 : 1;
      });

      for(let i = 0; i < arr.length; i++) {
          if(map[arr[i]] === 1){
              return i;
          }
      }
      return -1;
    }

    const str = 'abcabcde';
    const res = findOneStr(str);
    console.log('res', res);
  ```

- bubble sort

  ```javascript
  function bubbleSort(arr) {
    let length = arr.length;
    for(let i = 0; i < length; i ++) {
        for(let j = 0; j < length - i - 1; j ++) {
            if(arr[j] > arr[j + 1]) {
                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
            }
        }
    }
    return arr;
  }
  ```

- select sort

  ```javascript
  function selectSort(arr) {
    let index;
    for(let i = 0; i< arr.length - 1; i++) {
        index = i;
        for(let j = i + 1; j < arr.length; j++) {
            if(arr[j] < arr[index]) {
                index = j;
            }
        }
        if(index !== i) {
            [arr[i], arr[index]] = [arr[index], arr[i]];
        }
    }
    return arr;
  }

  let arr = [1,24,3,25,4,3];
  const newArr = selectSort(arr);
  console.log('newArr',newArr);
  ```

- insert sort

  ```javascript
  function insertSort(arr) {
    for(let i = 1; i < arr.length; i++) {
        let j = i;
        let target = arr[j];
        while(j > 0 && arr[j - 1] > target) {
            arr[j] = arr[j - 1];
            j --;
        }
        arr[j] = target;
        return arr;
    }
  }
  let arr = [1,24,3,25,4,3];
  const newArr = insertSort(arr);
  console.log('newArr',newArr);
  ```

- quick Sort

  ```javascript
  function quickSort(list) {
    if(list.length <= 1) return list;
    let mid = Math.floor(list.length / 2);
    let base = list.splice(mid, 1)[0];
    let left = [];
    let right = [];
    list.forEach(element => {
        if(element > base) {
            right.push(element);
        } else {
            left.push(element);
        }
    });
    return [...quickSort(left), base, ...quickSort(right)];
  }

  let arr = [1,24,3,25,4,3];
  const newArr = quickSort(arr);
  console.log('newArr',newArr);
  ```

- merge sort

  ```javascript
  function merge(left, right) {
    let [l, r] = [0, 0];
    let result = [];
    while(l < left.length && r < right.length) {
        if(left[l] < right[r]) {
            result.push(left[l]);
            l ++;
        } else {
            result.push(right[r]);
            r++;
        }
    }
    return [...result, ...left.slice(l, left.length), ...right.slice(r, right.length)];
  }

  function mergeSort(arr) {
      let len = arr.length;

      if(len <= 1) {
          return arr;
      }
      let mid = Math.floor(len / 2);
      let left = mergeSort(arr.slice(0, mid));
      let right = mergeSort(arr.slice(mid, arr.length));
      return merge(left, right);
  }

  let arr = [1,24,3,25,4,3];
  const newArr = mergeSort(arr);
  console.log('newArr',newArr);
  ```

- list to Tree

  ```javascript
  function listToTree(data) {
    let map = {};
    let treeData = [];
    for (let i = 0; i < data.length; i++) {
      map[data[i].id] = data[i];
    }

    for (let i in map) {
      if (map[i].parentId) {
        if (!map[map[i].parentId].children) {
          map[map[i].parentId].children = [];
        }
        map[map[i].parentId].children.push(map[i]);
      } else {
        treeData.push(map[i]);
      }
    }
    return treeData;
  }

  const list = [
    { id: 1, title: "child1", parentId: 0 },
    { id: 2, title: "child2", parentId: 0 },
    { id: 3, title: "child1_1", parentId: 1 },
    { id: 4, title: "child1_2", parentId: 1 },
    { id: 5, title: "child2_1", parentId: 2 },
  ];

  const tree = listToTree(list);
  console.log('tree', tree);
  ```

## Layout

- Flexible grid

  ```html
  <div class="flex-parent">
    <div class="flex-item">
      <div class="flex-sub-item">
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
      </div>
    </div>
    <div class="flex-item">
      <div class="flex-sub-item">
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
      </div>
    </div>
    <div class="flex-item">
      <div class="flex-sub-item">
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
      </div>
    </div>
    <div class="flex-item">
      <div class="flex-sub-item">
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
        <div class="flex-child">1</div>
      </div>
    </div>
  </div>
  ```

  ```css
  .flex-parent {
    display: flex;
    flex-wrap: wrap;
    border: 1px solid #000;
  }

  .flex-item {
    flex: 1 1 25%;
    box-sizing: border-box;
    border: 1px solid #000;
  }

  .flex-sub-item {
    display: flex;
    flex-wrap: wrap;
  }

  .flex-child {
    flex: 1 1 25%;
    box-sizing: border-box;
    border: 1px solid #000;
    text-align: center;
    padding: 10px;
  }

  @media (max-width: 720px) {
    .flex-parent, .flex-sub-item {
      flex-wrap: wrap;
    }

    .flex-item, .flex-child {
      flex: 1 1 50%;
    }
  }

  @media (max-width: 360px) {
    .flex-parent, .flex-sub-item {
      flex-direction: column;
    }

    .flex-item, .flex-child {
      flex: 1 1 100%;
    }
  }

  ```

## JS utils

- Encrypt the letter word by offset

```javascript
  const encrypt = (plainText, offset) => {
    return plainText.replace(/[a-z]/gi, (char) => {
      const start = char <= 'Z' ? 'A'.charCodeAt(0) : 'a'.charCodeAt(0);
      return String.fromCharCode(((char.charCodeAt(0) - start + offset) % 26) + start);
    });
  };

  const decrypt = (encryptedText, offset) => {
    return encryptedText.replace(/[a-z]/gi, (char) => {
      const start = char <= 'Z' ? 'A'.charCodeAt(0) : 'a'.charCodeAt(0);
      return String.fromCharCode(((char.charCodeAt(0) - start - offset + 26) % 26) + start);
    });
  };
```
